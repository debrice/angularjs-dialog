angular.module("dialog",[]),angular.module("dialog").controller("dialogCtrl",function(e,r,n){var t,i,a;return i=27,t=13,e.deferred=null,e.dialog={visible:!1,type:null,text:null,call_to_action:null},a=function(r){var n;if((n=r.which)===i||n===t){switch(r.stopPropagation(),r.which){case t:e.deferred.resolve();break;case i:e.deferred.reject()}return!1}},e.$watch("dialog.visible",function(e,r){return e!==r?e?window.addEventListener("keyup",a,!0):window.removeEventListener("keyup",a,!0):void 0}),n.addListener(function(n,t,i){return e.deferred=r.defer(),e.dialog.text=t,e.dialog.call_to_action=i,e.dialog.type=n,e.dialog.visible=!0,e.dialog.prompt_data="",e.deferred.promise["finally"](function(){return e.dialog.visible=!1}),e.deferred.promise})}),angular.module("dialog").service("dialogService",function(e){var r;return r=[],{confirm:function(e,r){return null==r&&(r="Ok"),this.broadcastChange("CONFIRM",e,r)},alert:function(e,r){return null==r&&(r="Ok"),this.broadcastChange("ALERT",e,r)},prompt:function(e,r){return null==r&&(r="Ok"),this.broadcastChange("PROMPT",e,r)},addListener:function(e){return r.push(e)},removeListener:function(e){return _.pull(r,e)},broadcastChange:function(){var n;return n=arguments,e.all(_.map(r,function(e){return e.apply(null,n)}))}}});